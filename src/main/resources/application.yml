spring:
  application:
    name: elliott-wave-bot

management:
  endpoints:
    web:
      exposure:
        include: health,info

bot:
  mode: BACKTEST

bybit:
  baseUrl: https://api-testnet.bybit.com
  wsPublicUrl: wss://stream-testnet.bybit.com/v5/public/spot
  wsPrivateUrl: wss://stream-testnet.bybit.com/v5/private
  apiKey: ${BYBIT_API_KEY:}
  apiSecret: ${BYBIT_API_SECRET:}
  recvWindowMs: 5000
  category: spot
  symbol: BTCUSDT
  interval: 15
  htfInterval: 60

strategy:
  zigzag:
    mode: PERCENT
    percentThreshold: 0.015
    atrPeriod: 14
    atrMultiplier: 2.0
  elliott:
    enforceWave4NoOverlap: true
    minScoreToTrade: 0.60
    swingAtrMultiplier: 2.0
    fib:
      wave2PreferredMin: 0.5
      wave2PreferredMax: 0.618
      takeProfitExtension: 2.0
  volatility:
    atrPeriod: 14
    minAtrPercent: 0.0
    maxAtrPercent: 0.05
  volume:
    period: 20
    minMultiplier: 1.0
  features:
    enableWaveFilter: true
    enableTrendFilter: true
    enableVolumeFilter: true
    enableRegimeGate: true
    entryModel: BASELINE
    exitModel: FIXED
  exit:
    atrStopMultiplier: 1.5
    atrTakeProfitMultiplier: 3.0
    trailActivationAtr: 0.0
    trailDistanceAtr: 0.0
    timeStopBars: 32
    maxStopAtrMultiplier: 0.0
  entry:
    minRewardRisk: 1.1
  regime:
    slopeLookbackBars: 20
    weakSlope: 0.002
    strongSlope: 0.01
    minTradesPerBucket: 6
    thresholds:
      atrLow: 0.002266
      atrHigh: 0.003541
      volumeLow: 1.321967
      volumeHigh: 1.815555
    blocked:
      - UP_WEAK|LOW|HIGH
      - UP_WEAK|MID|NORMAL
      - UP_WEAK|HIGH|HIGH
      - UP_WEAK|HIGH|NORMAL

risk:
  riskPerTrade: 0.01
  dailyMaxDd: 0.03
  maxConsecutiveLosses: 3
  cooldownMinutes: 60
  minQty: 0.0
  maxQty: 1000000.0
  statePath: data/risk-state.json

backtest:
  initialCapital: 1000
  feeRate: 0.0006
  slippageBps: 2
  startMs:
  endMs:
  csvPath: data/sample_btcusdt_15m.csv

research:
  enabled: false
  mode: REPORT
  outputDir: build/reports
  walkForward:
    trainDays: 90
    testDays: 30
    minTrades: 8
    maxTrials: 12
    enableRegimeGate: true

portfolio:
  statePath: data/portfolio-state.json
