spring:
  config:
    activate:
      on-profile: turbo

bybit:
  category: spot
  symbol: BTCUSDT
  interval: 3          # 3분 캔들로 트레이드
  lowInterval: 1       # 트리거/미세 신호용
  htfInterval: 15      # 추세 판별용

bot:
  mode: BACKTEST

backtest:
  csvPath: data/bybit_btcusdt_3m_365d.csv
  initialCapital: 1000
  feeRate: 0.0006
  slippageBps: 4       # 더 보수적인 슬리피지 반영
  maxLookbackBars: 1200
  maxHtfLookbackBars: 800
  maxLtfLookbackBars: 2000

strategy:
  features:
    enableWaveFilter: true
    enableShortWave: true
    enableTrendFilter: true
    enableVolumeFilter: false
    enableRegimeGate: true
    enableSwingFallback: true
    entryModel: FAST_BREAKOUT
    exitModel: HYBRID
  zigzag:
    mode: ATR
    atrPeriod: 14
    atrMultiplier: 1.2
  elliott:
    minScoreToTrade: 0.40
    swingAtrMultiplier: 1.5
    fib:
      wave2PreferredMin: 0.45
      wave2PreferredMax: 0.70
      takeProfitExtension: 2.5
  volatility:
    atrPeriod: 14
    minAtrPercent: 0.0008
    maxAtrPercent: 0.08
  volume:
    period: 20
    minMultiplier: 0.6
  feeAware:
    enabled: true
    minEdgeMultiple: 2.5
    bufferBps: 2
  trendStrength:
    enabled: true
    model: ADX
    n: 14
    threshold: 25
  volExpansion:
    enabled: true
    lookback: 180
    compressionQuantile: 0.15
    requireRising: true
    recentCompressionBars: 60
    period: 20
    stdDevMultiplier: 2.0
  regime:
    minTradesPerBucket: 10
    thresholds:
      atrLow: 0.001501
      atrHigh: 0.002129
      volumeLow: 1.601400
      volumeHigh: 2.553619
    blocked:
      - DOWN_STRONG|HIGH|HIGH
      - UP_WEAK|MID|NORMAL
      - UP_WEAK|LOW|NORMAL
      - UP_WEAK|LOW|HIGH
      - UP_WEAK|LOW|LOW
      - UP_WEAK|MID|LOW
      - DOWN_STRONG|HIGH|NORMAL
      - UP_WEAK|MID|HIGH
      - FLAT|LOW|LOW
      - FLAT|MID|HIGH
      - FLAT|LOW|HIGH
      - UP_WEAK|HIGH|LOW
      - FLAT|LOW|NORMAL
      - FLAT|MID|LOW
      - FLAT|HIGH|NORMAL
      - UP_WEAK|HIGH|HIGH
  fastBreakout:
    lookbackBars: 30
    atrStopMultiplier: 1.1
    atrTakeProfitMultiplier: 3.5
    breakoutAtrBuffer: 0.30
    minBodyAtr: 0.60
  exit:
    atrStopMultiplier: 1.0
    atrTakeProfitMultiplier: 4.5
    trailActivationAtr: 1.5
    trailDistanceAtr: 0.8
    timeStopBars: 64
    maxStopAtrMultiplier: 6.0
    breakEvenAtr: 0.8
  entry:
    minRewardRisk: 2.2
  pyramiding:
    enabled: false
    maxAdds: 1
    addOnRiskFraction: 0.5
    minBarsBetweenAdds: 4
    triggerModel: ATR_MOVE
    minMoveAtr: 0.5
  shortGate:
    enabled: true
    requireDowntrend: true
    allowed:
      - DOWN_STRONG|HIGH|HIGH
      - DOWN_STRONG|MID|HIGH
      - DOWN_STRONG|HIGH|NORMAL
      - DOWN_STRONG|MID|NORMAL
    blocked: []

risk:
  riskPerTrade: 0.05
  dailyMaxDd: 0.25
  maxConsecutiveLosses: 3
  cooldownMinutes: 45
  minQty: 0.0
  maxQty: 1000000.0
  maxLeverage: 50
  compounding:
    enabled: true
    minRiskPerTrade: 0.03
    maxRiskPerTrade: 0.20
    scaleUp: 1.25
    scaleDown: 0.85
    minMultiplier: 0.8
    maxMultiplier: 4.0
